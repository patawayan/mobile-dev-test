import{d as _,o as a,c as r,a as t,t as w,p as L,e as S,_ as h,G as I,i as F,u as C,j as A,k as x,s as P,l as U,X as m,m as q,q as D,J as T,x as V,r as v,y as B,z as W,A as E,h as u,B as f,F as G,U as N}from"./index-260e0ef4.js";const $=e=>(L("data-v-da0ea25d"),e=e(),S(),e),J={class:"container align-center"},X=$(()=>t("div",{class:"hr"},[t("hr")],-1)),j=$(()=>t("div",{class:"hr"},[t("hr")],-1)),z=_({__name:"DividerText",props:{msg:null},setup(e){return(o,s)=>(a(),r("div",J,[X,t("span",null,w(e.msg),1),j]))}});const M=h(z,[["__scopeId","data-v-da0ea25d"]]),O=new I,H=new F,b=C(),{setLoginUser:y,setLoginUserFirebase:K}=A(),Q=async(e,o)=>{const s={success:!1};try{const c=m(b,"users"),i=q(c,D("username","==",e)),d=await T(i);if(!d.empty)d.docs.filter(n=>n.data().password===o).length>0?(y(e),s.success=!0):s.message="Wrong Password.";else{const n=await V(m(b,"users"),{username:e,password:o});console.log("user added with ID: ",n.id),y(e),s.success=!0}}catch(c){s.message="Something went wrong with adding user: "+c}return s},p="signInWithRedirect",R=async e=>{const o=x();return localStorage.setItem(p,"true"),P(o,e).then(()=>k())},k=async()=>{const e={success:!1},o=x();try{const s=await U(o);if(s){const c=I.credentialFromResult(s);K(s.user),e.success=!0}else e.message="There was an arror getting user credentials."}catch(s){e.message=`${s.code}: ${s.message}`}return e},Y=()=>R(O),Z=()=>R(H),ee=["onSubmit"],se={key:0,class:"error"},te=["disabled"],oe=["disabled"],ne=["disabled"],ae={key:0},re={key:1},ce={class:"container-col login-forms"},ie=["disabled"],le=["disabled"],de=_({__name:"LoginForm",setup(e){const o=v(""),s=v(!1),c=B(),i=async n=>{o.value="",s.value=!0;try{const{success:l,message:g=""}=await n();l?c.push("/"):o.value=g}finally{s.value=!1}},d=async n=>{i(()=>Q(n.target[0].value,n.target[1].value))};return localStorage.getItem(p)==="true"&&(localStorage.removeItem(p),i(k)),(n,l)=>(a(),r(G,null,[t("form",{class:"container-col align-center login-forms",onSubmit:E(d,["prevent"])},[o.value?(a(),r("div",se,w(o.value),1)):W("",!0),t("input",{placeholder:"Username...",required:"",disabled:s.value},null,8,te),t("input",{type:"password",placeholder:"Password...",required:"",disabled:s.value},null,8,oe),t("button",{type:"submit",class:"dark rounded",disabled:s.value},[s.value?(a(),r("span",ae,"Loading")):(a(),r("span",re,"Login"))],8,ne)],40,ee),u(M,{msg:"OR"}),t("div",ce,[t("button",{disabled:s.value,onClick:l[0]||(l[0]=g=>i(f(Z)))}," Login with Facebook ",8,ie),t("button",{disabled:s.value,onClick:l[1]||(l[1]=g=>i(f(Y)))}," Login with Google ",8,le)])],64))}});const ue=h(de,[["__scopeId","data-v-18825eba"]]),_e=e=>(L("data-v-5973a60a"),e=e(),S(),e),ge={id:"login-container",class:"container-col align-center"},pe=_e(()=>t("div",{class:"container-col align-center"},[t("h1",null,"Flutter Exam 01"),t("h1",null,"Tri7Solution")],-1)),he=_({__name:"LoginComponent",setup(e){return(o,s)=>(a(),r("div",ge,[pe,u(N),u(ue)]))}});const me=h(he,[["__scopeId","data-v-5973a60a"]]),fe=_({__name:"LoginView",setup(e){return(o,s)=>(a(),r("main",null,[u(me)]))}});export{fe as default};
